<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Solutions - NutriBaba</title>
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/components.css">
    <link rel="stylesheet" href="/css/animations.css">
    <link rel="stylesheet" href="/css/pages.css">
    <link rel="stylesheet" href="/css/mobile.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <% if (user) { %>
        <aside class="sidebar" id="sidebar">
            <div class="brand">
                <h1>NutriBaba</h1>
            </div>
            
            <% if (user.role === 'expert') { %>
                <nav class="nav-group">
                    <h2 class="nav-title">Expert Menu</h2>
                    <div class="nav-items">
                        <a href="/expert" class="<%= path === '/expert' ? 'active' : '' %>">
                            <svg class="nav-icon"><use href="/svg/icons.svg#icon-query"/></svg>
                            View Queries
                        </a>
                        <a href="/expert/solutions" class="<%= path === '/expert/solutions' ? 'active' : '' %>">
                            <svg class="nav-icon"><use href="/svg/icons.svg#icon-solution"/></svg>
                            My Solutions
                        </a>
                        <a href="/expert/feedback" class="<%= path === '/expert/feedback' ? 'active' : '' %>">
                            <svg class="nav-icon"><use href="/svg/icons.svg#icon-feedback"/></svg>
                            View Feedback
                        </a>
                        <a href="/expert/tips" class="<%= path === '/expert/tips' ? 'active' : '' %>">
                            <svg class="nav-icon"><use href="/svg/icons.svg#icon-tips"/></svg>
                            Health Tips
                        </a>
                    </div>
                </nav>
            <% } %>
        </aside>
        <% } %>

        <div class="main-content <%= user ? '' : 'full' %>" id="main">
            <!-- Header -->
            <header class="site-header">
                <div class="header-container">
                    <% if (user) { %>
                    <button id="sidebar-toggle" class="menu-toggle">
                        <svg width="24" height="24" fill="none" stroke="currentColor">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <% } else { %>
                    <a href="/" class="brand-logo">
                        <h1>NutriBaba</h1>
                    </a>
                    <% } %>
                    
                    <div class="header-right">
                        <% if (user) { %>
                            <span class="user-name"><%= user.name %></span>
                            <a href="/auth/logout" class="btn btn-outline">Logout</a>
                        <% } else { %>
                            <a href="/auth/login" class="btn btn-outline">Login</a>
                            <a href="/auth/register" class="btn btn-primary">Register</a>
                        <% } %>
                    </div>
                </div>
            </header>

            <!-- Main Content -->
            <main class="content">
                <div class="container">
                    <div class="solutions-container">
                        <div class="page-header">
                            <h2 class="page-title">My Solutions</h2>
                            <p class="page-subtitle">All solutions I've provided to users</p>
                        </div>
                        
                        <% if (solutions && solutions.length > 0) { %>
                            <div class="solutions-grid">
                                <% solutions.forEach(solution => { %>
                                    <div class="solution-card card fade-in">
                                        <div class="solution-header">
                                            <h3 class="solution-title">
                                                <%= solution.query.title %>
                                            </h3>
                                            <div class="solution-meta">
                                                <span class="solution-date"><%= new Date(solution.createdAt).toLocaleDateString() %></span>
                                                <span class="solution-status badge badge-success">Published</span>
                                            </div>
                                        </div>
                                        
                                        <div class="solution-content">
                                            <p><%= solution.content.substring(0, 200) %><% if (solution.content.length > 200) { %>...<% } %></p>
                                        </div>
                                        
                                        <div class="solution-actions">
                                            <button class="btn btn-outline view-full-solution" data-solution-id="<%= solution._id %>">
                                                <svg class="icon" width="16" height="16"><use href="/svg/icons.svg#icon-view"/></svg>
                                                View Full Solution
                                            </button>
                                        </div>
                                        
                                        <div id="full-solution-<%= solution._id %>" class="full-solution" style="display: none;">
                                            <hr>
                                            <div class="full-content">
                                                <h4>Complete Solution:</h4>
                                                <p><%= solution.content %></p>
                                            </div>
                                        </div>
                                    </div>
                                <% }) %>
                            </div>
                        <% } else { %>
                            <div class="empty-state">
                                <div class="empty-icon">
                                    <svg width="64" height="64"><use href="/svg/icons.svg#icon-solution"/></svg>
                                </div>
                                <h3>No Solutions Yet</h3>
                                <p>Start helping users by providing solutions to their diet queries.</p>
                                <a href="/expert" class="btn btn-primary">
                                    <svg class="icon" width="16" height="16"><use href="/svg/icons.svg#icon-query"/></svg>
                                    View Pending Queries
                                </a>
                            </div>
                        <% } %>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <script src="/js/main.js"></script>
</body>
</html>
